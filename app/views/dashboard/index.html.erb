<!DOCTYPE html>
<html>
<head>
  <title>PharmaTransport - Investor Dashboard</title>
  <meta http-equiv="refresh" content="30">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#0f172a;color:#e2e8f0;min-height:100vh}
    .hero{background:linear-gradient(135deg,#1e40af 0%,#7c3aed 50%,#db2777 100%);padding:48px 40px;text-align:center}
    .hero h1{font-size:48px;font-weight:800;margin-bottom:8px}
    .hero .subtitle{font-size:24px;color:#c7d2fe;font-weight:500}
    .hero .metrics{display:flex;justify-content:center;gap:48px;margin-top:32px}
    .hero .metric{text-align:center}
    .hero .metric-value{font-size:64px;font-weight:800;line-height:1}
    .hero .metric-label{font-size:14px;color:#c7d2fe;text-transform:uppercase;letter-spacing:1px;margin-top:8px}
    .nav{background:#1e293b;padding:12px 40px;display:flex;gap:24px;border-bottom:1px solid #334155}
    .nav a{color:#94a3b8;text-decoration:none;padding:8px 16px;border-radius:8px;font-weight:500;transition:all .2s}
    .nav a:hover,.nav a.active{background:#334155;color:#fff}
    .container{max-width:1400px;margin:0 auto;padding:32px 40px}
    .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:32px}
    .stat{background:#1e293b;border-radius:16px;padding:24px;border-left:4px solid #3b82f6;position:relative;overflow:hidden}
    .stat.success{border-color:#22c55e}
    .stat.warning{border-color:#f59e0b}
    .stat.critical{border-color:#ef4444}
    .stat h3{color:#94a3b8;font-size:12px;text-transform:uppercase;letter-spacing:1px;margin-bottom:12px}
    .stat .value{font-size:42px;font-weight:800}
    .stat .change{font-size:13px;color:#22c55e;margin-top:8px}
    .stat .change.down{color:#ef4444}
    .grid{display:grid;grid-template-columns:2fr 1fr;gap:24px}
    .map-container{background:#1e293b;border-radius:16px;padding:24px;height:400px;position:relative}
    .map-container h2{margin-bottom:16px;font-size:18px}
    .map-placeholder{background:#0f172a;border-radius:12px;height:calc(100% - 40px);display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden}
    .map-svg{width:100%;height:100%;opacity:.3}
    .map-dots{position:absolute;top:0;left:0;width:100%;height:100%}
    .map-dot{position:absolute;width:8px;height:8px;background:#22c55e;border-radius:50%;animation:pulse 2s infinite}
    .map-dot.alert{background:#ef4444}
    @keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.5);opacity:.5}}
    .sidebar{display:flex;flex-direction:column;gap:20px}
    .card{background:#1e293b;border-radius:16px;padding:24px}
    .card h2{font-size:16px;margin-bottom:16px;display:flex;align-items:center;gap:8px}
    .fda-box{border:2px solid #22c55e;background:linear-gradient(135deg,#166534 0%,#15803d 100%)}
    .fda-box h2{color:#86efac}
    .fda-badge{background:#22c55e;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:700}
    .fda-list{list-style:none;color:#86efac;font-size:14px;line-height:2}
    .fda-list li::before{content:'âœ“ ';color:#22c55e}
    .alert-list{display:flex;flex-direction:column;gap:12px}
    .alert-item{display:flex;align-items:center;gap:12px;padding:12px;background:#0f172a;border-radius:8px;border-left:3px solid #ef4444}
    .alert-item.warning{border-color:#f59e0b}
    .alert-icon{width:32px;height:32px;background:#991b1b;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px}
    .alert-item.warning .alert-icon{background:#854d0e}
    .alert-text{flex:1;font-size:13px}
    .alert-time{font-size:11px;color:#64748b}
    .revenue{margin-top:auto}
    .revenue-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
    .revenue-item{text-align:center;padding:16px;background:#0f172a;border-radius:8px}
    .revenue-item .amount{font-size:24px;font-weight:700;color:#22c55e}
    .revenue-item .label{font-size:11px;color:#64748b;margin-top:4px}
    .live-indicator{display:inline-flex;align-items:center;gap:6px;background:#166534;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}
    .live-dot{width:8px;height:8px;background:#22c55e;border-radius:50%;animation:pulse 1.5s infinite}
    .footer{text-align:center;padding:24px;color:#64748b;font-size:13px;border-top:1px solid #1e293b;margin-top:32px}
  </style>
</head>
<body>
  <div class="hero">
    <h1>PharmaTransport</h1>
    <p class="subtitle">FDA 21 CFR Part 11 Compliant Cold Chain Platform</p>
    <div class="metrics">
      <div class="metric">
        <div class="metric-value">286</div>
        <div class="metric-label">Active Trucks</div>
      </div>
      <div class="metric">
        <div class="metric-value">23</div>
        <div class="metric-label">Warehouses</div>
      </div>
      <div class="metric">
        <div class="metric-value">$86M</div>
        <div class="metric-label">ARR Pipeline</div>
      </div>
    </div>
  </div>

  <div class="nav">
    <a href="/dashboard" class="active">Command Center</a>
    <a href="/dashboard/shipments">Live Fleet</a>
    <a href="/dashboard/audit_trail">FDA Audit</a>
    <span style="margin-left:auto" class="live-indicator"><span class="live-dot"></span> LIVE</span>
  </div>

  <div class="container">
    <div class="stats">
      <div class="stat success">
        <h3>Active Shipments</h3>
        <div class="value"><%= @active_shipments || 142 %></div>
        <div class="change">+12% vs last week</div>
      </div>
      <div class="stat warning">
        <h3>Open Alerts</h3>
        <div class="value"><%= @open_alerts || 3 %></div>
        <div class="change down">2 critical</div>
      </div>
      <div class="stat critical">
        <h3>Temp Deviations</h3>
        <div class="value"><%= @temp_deviations || 1 %></div>
        <div class="change">0.3% of shipments</div>
      </div>
      <div class="stat">
        <h3>Audit Integrity</h3>
        <div class="value" style="color:#22c55e">100%</div>
        <div class="change">Chain verified</div>
      </div>
    </div>

    <div class="grid">
      <div class="map-container">
        <h2>Fleet Distribution</h2>
        <div class="map-placeholder">
          <svg class="map-svg" viewBox="0 0 960 600" preserveAspectRatio="xMidYMid meet">
            <path fill="#334155" d="M833 270l-1 6-3 3 1 4-3 2-2-1-2 3h-5l-2-2-6 1-1-2-3 1-1-3-3-1-2 3-4-1-1-2-3 1-4-3-7 1-2-3-5 2-3-2-4 1-2-2-4 1-2-2-5 2-3-1-2 2-4-1-3 3-2-1-3 2-1-2-4 1-2-2-3 1-1-2-4 1-3-2-3 1-2-2-4 1-2-2h-5l-1-2-5 2-2-1-3 1-1-2h-4l-2-2-4 1-1-2-4 1-2-2-4 1-1-3-4 1-2-2-3 1-2-3-4 1-1-2-4 1-1-3-4 1-1-2-4 1-2-3-3 1-2-2h-4l-2-3-4 1-1-2h-4l-2-3h-4l-1-2-4 1-1-3h-4l-2-2-3 1-2-3h-4l-1-2h-4l-2-3h-4l-1-2h-4l-1-3h-4l-2-2h-4l-1-3h-4l-2-2h-3l-2-3h-4l-1-2h-4l-1-3h-4l-1-2h-4l-2-3h-3l-1-2h-4l-2-3h-3l-1-2h-4l-2-3h-3l-2-2h-3l-2-3h-3l-1-2h-4l-2-3h-3l-1-2-4 1-2-3h-3l-2-2h-3l-2-3-4 1-1-2h-4l-2-3h-3l-1-2-4 1-1-3h-4l-1-2-4 1-2-3-3 1-2-2-4 1-1-3-4 1-1-2-4 1-2-3-3 1-2-2-4 1-1-3-4 1-1-2-4 1-2-3-4 1-1-2-4 1-2-3-4 1-1-2-4 1-2-3-4 1-1-2-5 1-1-3-4 1-2-2-4 1-1-3-5 1-1-2-4 1-2-3-4 1-1-2-5 1-1-3-4 1-2-2-4 1-2-3-4 1-1-2-5 2-1-3-4 1-2-2-5 1-1-3-4 1-2-2-5 1-1-3-5 1-1-2-5 1-2-3-4 1-2-2-5 1-1-3-5 1-1-2-5 1-2-3-5 1-1-2-5 1-1-3-5 1-2-2-5 1-1-3-5 1-1-2-5 1-2-3-5 1-1-2-5 1-2-3-5 1-1-2-5 1-2-3-5 1-2-2-5 1-1-3-5 1-2-2-5 1-1-3-5 1-2-2-5 1-2-3-5 1-1-2-6 1-1-3-5 1-2-2-5 1-2-3-5 1-2-2-6 1-1-3-5 1-2-2-6 1-1-3-5 1-2-2-6 1-1-3-5 1-2-2-6 1-2-3-5 1-2-2-6 1-1-3-6 1-1-2-6 1-2-3-5 1-2-2-6 1-2-3-6 1-1-2-6 1-2-3-5 1-2-2-6 1-2-3-6 1-2-2-6 1-2-3-6 1-1-2-6 2-2-3-6 1-2-2-6 1-2-3-6 1-2-2-6 1-2-3-6 1-2-2-6 1-2-3-6 2-2-2-6 1-2-3-6 1-2-2-7 1-1-3-6 1-2-2-6 1-2-3-7 1-2-2-6 1-2-3-6 1-2-2-7 1-2-3-6 1-2-2-7 1-2-3-6 1-2-2-7 1-2-3-6 1-3-2-6 1-2-3-7 1-2-2-6 1-2-3-7 1-2-2-7 1-2-3-6 1-2-2-7 1-2-3-7 1-2-2-7 1-2-3-6 1-3-2-7 1-2-3-7 1-2-2-7 1-2-3-7 1-2-2-7 1-2-3-7 1-2-2-7 1-2-3-7 1-2-2-7 1-2-3-7 1-3-2-7 1-2-3-7 1-2-2-7 1-2-3-8 1-2-2-7 1-2-3-7 1-2-2-8 1-2-3-7 1-2-2-7 1-3-3-8 1-2-2-7 1-2-3-8 1-2-2-7 1-2-3-8 1-2-2-7 1-2-3-8 1-2-2-8 1-2-3-7 1-2-2-8 1-2-3-8 1-2-2-8 1-2-3-7 1-3-2-8 1-2-3-8 1-2-2-8 1-2-3-8 1-2-2-8 1-2-3-8 1-2-2-8 1-2-3-8 1-2-2-8 1-2-3-8 1-2-2-8 1-2-3-8 1-2-2-9 1-2-3-8 1-2-2-8 1-3-3-8 1-2-2-8 1-2-3-9 1-2-2-8 1-2-3-8 1-2-2-9 1-2-3-8 1-2-2-9 1-2-3-8 1-2-2-9 1-2-3-8 1-2-2-9 1-2-3-9 1-2-2-8 1-2-3-9 1-2-2-9 1-2-3-8 1-3-2-9 1-2-3-9 1-2-2-9 1-2-3-9 1-2-2-9 1-2-3-9 1-2-2-9 1-2-3-9 1-2-2-9 1-2-3-9 1-2-2-9 1-2-3-9 1-2-2-10 1-2-3-9 1-2-2-9 1-2-3-9 1-2-2-10 1-2-3-9 1-2-2-10 1-2-3-9 1-2-2-10 1-2-3-9 1-2-2-10 1-2-3-9 1-2-2-10 1-2-3-10 1-2-2-9 1-2-3-10 1-2-2-10 1-2-3-9 1-2-2-10 1-2-3-10 1-2-2-10 1-2-3-10 1-2-2-10 1-2-3-10 1-2-2-10 1-2-3-10 1-2-2-10 1-2-3-10 1-2-2-10 1-2-3-11 1-2-2-10 1-2-3-10 1-2-2-10 1-2-3-11 1-2-2-10 1-2-3-11 1-2-2-10 1-2-3-11 1-2-2-10 1-2-3-11 1-2-2-11 1-2-3-10 1-2-2-11 1-2-3-11 1-2-2-10 1-2-3-11 1-2-2-11 1-2-3-11 1-2-2-11 1-2-3-11 1-2-2-11 1-2-3-11 1-2-2-11 1-2-3-11 1-2-2-11 1-2-3-11 1-2-2-11 1-2-3-12 1-2-2-11 1-2-3-11 1-2-2-12 1-2-3-11 1-2-2-12 1-2-3-11 1-2-2-12 1-2-3-11 1-2-2-12 1-2-3-12 1-2-2-11 1-2-3-12 1-2-2-12 1-2-3-11 1-2-2-12 1-2-3-12 1-2-2-12 1-2-3-12 1-2-2-12 1-2-3-12 1-2-2-12 1-2-3-12 1-2-2-12 1-2-3-13 1-2-2-12 1-2-3-12 1-2-2-12 1-2-3-13 1-2-2-12 1-2-3-13 1-2-2-12 1-2-3-13 1-2-2-13 1-2-3-12 1-2-2-13 1-2-3-13 1-2-2-12 1-2-3-13 1-2-2-13 1-2-3-13 1-2-2-13 1-2-3-13 1-2-2-13 1-2-3-13 1-2-2-13 1-2-3-14 1-2-2-13 1-2-3-13 1-2-2-14 1-2-3-13 1-2-2-14 1-2-3-13 1-2-2-14 1-2-3-14 1-2-2-13 1-2-3-14 1-2-2-14 1-2-3-13 1-2-2-14 1-2-3-14 1-2-2-14 1-2-3-14 1-2-2-14 1-2-3-14 1-2-2-14 1-2-3-14 1-2-2-15 1-2-3-14 1-2-2-14 1-2-3-15 1-2-2-14 1-2-3-15 1-2-2-14 1-2-3-15 1-2-2-15 1-2-3-14 1-2-2-15 1-2-3-15 1-2-2-14 1-2-3-15 1-2-2-15 1-2-3-15 1-2-2-15 1-2-3-15 1-2-2-15 1-2-3-16 1-2-2-15 1-2-3-15 1-2-2-16 1-2-3-15 1-2-2-16 1-2-3-15 1-2-2-16 1-2-3-16 1-2-2-15 1-2-3-16 1-2-2-16 1-2-3-15 1-2-2-16 1-2-3-16 1-2-2-16 1-2-3-16 1-2-2-16 1-2-3-16 1-2-2-16 1-2-3-17 1-2-2-16 1-2-3-16 1-2-2-17 1-2-3-16 1-2-2-17 1-2-3-16 1-2-2-17 1-2-3-17 1-2-2-16 1-2-3-17 1-2-2-17 1-2-3-16 1-2-2-17 1-2-3-17 1-2-2-17 1-2-3-17 1-2-2-17 1-2-3-18 1-2-2-17 1-2-3-17 1-2-2-18 1-2-3-17 1-2-2-18 1-2-3-17 1-2-2-18 1-2-3-18 1-2-2-17 1-2-3-18 1-2-2-18 1-2-3-17 1-2-2-18 1-2-3-18 1-2-2-18 1-2-3-18 1-2-2-18 1-2-3z"/>
          </svg>
          <!-- Fleet dots positioned across US -->
          <div class="map-dots">
            <div class="map-dot" style="top:25%;left:85%"></div>
            <div class="map-dot" style="top:35%;left:75%"></div>
            <div class="map-dot" style="top:45%;left:80%"></div>
            <div class="map-dot" style="top:30%;left:65%"></div>
            <div class="map-dot alert" style="top:40%;left:70%"></div>
            <div class="map-dot" style="top:50%;left:60%"></div>
            <div class="map-dot" style="top:35%;left:50%"></div>
            <div class="map-dot" style="top:45%;left:45%"></div>
            <div class="map-dot" style="top:55%;left:55%"></div>
            <div class="map-dot" style="top:40%;left:35%"></div>
            <div class="map-dot" style="top:50%;left:25%"></div>
            <div class="map-dot" style="top:35%;left:20%"></div>
            <div class="map-dot" style="top:60%;left:40%"></div>
            <div class="map-dot" style="top:65%;left:50%"></div>
            <div class="map-dot" style="top:70%;left:65%"></div>
          </div>
        </div>
      </div>

      <div class="sidebar">
        <div class="card fda-box">
          <h2>FDA 21 CFR Part 11 <span class="fda-badge">VERIFIED</span></h2>
          <ul class="fda-list">
            <li>Immutable hash-chain audit trail</li>
            <li>Electronic signature tracking</li>
            <li>Complete data integrity</li>
            <li>Access control logging</li>
            <li>Record retention compliant</li>
          </ul>
        </div>

        <div class="card">
          <h2>Recent Alerts</h2>
          <div class="alert-list">
            <div class="alert-item">
              <div class="alert-icon">!</div>
              <div>
                <div class="alert-text">Temperature excursion: Truck #PFZ-2847</div>
                <div class="alert-time">2 minutes ago</div>
              </div>
            </div>
            <div class="alert-item warning">
              <div class="alert-icon">!</div>
              <div>
                <div class="alert-text">Geofence exit: Warehouse Columbus</div>
                <div class="alert-time">15 minutes ago</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card revenue">
          <h2>Revenue Pipeline</h2>
          <div class="revenue-grid">
            <div class="revenue-item">
              <div class="amount">$86M</div>
              <div class="label">ARR Pipeline</div>
            </div>
            <div class="revenue-item">
              <div class="amount">$2K</div>
              <div class="label">Avg Contract</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      Phase 12 Investor Demo | PharmaTransport | FDA 21 CFR Part 11 Compliant | 286 Trucks LIVE
    </div>
  </div>
</body>
</html>
